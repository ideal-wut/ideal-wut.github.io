---
layout: page
title: 研究成果
permalink: /achievements/
---

<div class="achievements-page">
    <div class="filters-section">
        <div class="filter-group">
            <label for="year-filter">年份：</label>
            <select id="year-filter" onchange="filterPapers()">
                <option value="all">全部</option>
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="page-size">每页显示：</label>
            <select id="page-size" onchange="changePageSize()">
                <option value="10">10</option>
                <option value="20" selected>20</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
    </div>

    <div class="papers-list" id="papers-list">
        {% if site.data.papers and site.data.papers.size > 0 %}
        {% assign sorted_papers = site.data.papers | sort: 'year' | reverse %}
        {% for paper in sorted_papers %}
        <div class="paper-card" data-year="{{ paper.year }}">
            <h3 class="paper-title">{{ paper.title }}</h3>
            <p class="paper-authors">{{ paper.authors }}</p>
            <div class="paper-meta">
                {% if paper.volume_issue_pages %}
                    <span>{{ paper.venue }} {{ paper.volume_issue_pages }} ({{ paper.year }})</span>
                {% elsif paper.venue contains paper.year %}
                    <span>{{ paper.venue }}</span>
                {% else %}
                    <span>{{ paper.venue }} ({{ paper.year }})</span>
                {% endif %}
            </div>
            <div class="paper-links">
                {% assign link = paper.doi | default: paper.url %}
                {% if link %}
                    <a href="{{ link }}" target="_blank" rel="noopener" class="btn-paper-link">查看论文</a>
                {% else %}
                    <a href="https://scholar.google.com/scholar?q={{ paper.title | uri_escape }}+{{ paper.authors | uri_escape }}" target="_blank" rel="noopener" class="btn-paper-link">Google Scholar</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p class="no-papers">暂无论文发表</p>
        {% endif %}
    </div>

    <div class="pagination" id="pagination">
        <!-- Pagination will be generated by JavaScript -->
    </div>
</div>

<script>
let currentPage = 1;
let pageSize = 20;
let filteredPapers = [];

function filterPapers() {
    const yearFilter = document.getElementById('year-filter').value;
    const allPapers = Array.from(document.querySelectorAll('.paper-card'));

    filteredPapers = allPapers.filter(paper => {
        const year = paper.getAttribute('data-year');
        return yearFilter === 'all' || year === yearFilter;
    });

    // Hide all initially; displayPage will show the current page slice
    allPapers.forEach(paper => { paper.style.display = 'none'; });

    currentPage = 1;
    displayPage();
}

function changePageSize() {
    pageSize = parseInt(document.getElementById('page-size').value, 10);
    currentPage = 1;
    displayPage();
}

function displayPage() {
    const totalItems = filteredPapers.length;
    const totalPages = Math.ceil(totalItems / pageSize);

    // Clamp current page to valid bounds
    if (totalPages === 0) {
        currentPage = 1;
    } else if (currentPage > totalPages) {
        currentPage = totalPages;
    } else if (currentPage < 1) {
        currentPage = 1;
    }

    const start = (currentPage - 1) * pageSize;
    const end = Math.min(start + pageSize, totalItems);

    // Hide all, then show only current page items
    document.querySelectorAll('.paper-card').forEach(paper => { paper.style.display = 'none'; });
    for (let i = start; i < end; i++) {
        filteredPapers[i].style.display = 'block';
    }

    renderPagination(totalPages);
}

function renderPagination(totalPages) {
    const paginationDiv = document.getElementById('pagination');
    let html = '';

    if (totalPages > 1) {
        if (currentPage > 1) {
            html += `<button onclick="changePage(${currentPage - 1})">上一页</button>`;
        }

        for (let i = 1; i <= totalPages; i++) {
            if (i === currentPage) {
                html += `<button class="active">${i}</button>`;
            } else {
                html += `<button onclick="changePage(${i})">${i}</button>`;
            }
        }

        if (currentPage < totalPages) {
            html += `<button onclick="changePage(${currentPage + 1})">下一页</button>`;
        }
    } else {
        html = '';
    }

    paginationDiv.innerHTML = html;
}

function changePage(page) {
    currentPage = page;
    displayPage();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    filterPapers();
});
</script>
